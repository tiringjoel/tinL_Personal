%-------------------------
%minimal-unix
%(c) H.Buchmann FHNW 2017
%export TEXINPUTS=.:${HOME}/fhnw/edu/:${HOME}/fhnw/edu/tinL/config/latex:${HOME}/fhnw/edu/config//:
%-------------------------
\documentclass{beamer}
\usepackage{latex/beamer}
\input{defines.tex}

\usepackage[absolute]{textpos}
\setlength{\TPHorizModule}{1mm}
\setlength{\TPVertModule}{1mm}

\begin{document}

\newcommand{\md}{\cod{md-bbb-{\em version}.img}}
\newcommand{\mdev}{\cod{md-bbb-devel-{\em version}.tar.gz}}
\title[Minimal]{Ein kleines \unix}

\frame{\titlepage}

\begin{frame}{Ein kleines \unix}
 \begin{itemize}
  \item die einzelnen Komponenten
  \item für Test
  \item übersichtlich
  \item grosse Systeme haben ähnliche Komponenten
 \end{itemize}
\end{frame}

\begin{frame}{Die grossen Blöcke}{Übergänge}
\includegraphics[width=\textwidth]{components.pdf}
\begin{textblock}{100}(10,50)
 \begin{description}[reset]
  \item[reset] start: BigBang
  \item[A] unprotected$\to$ protected ?
  \item[B] concurrency
 \end{description}
\end{textblock}
\end{frame}

\begin{frame}[fragile]{Boot:u-boot}{Zwei Files}
\begin{block}{reset}
{\tiny
\begin{verbatim}
U-Boot 2018.09 (Dec 18 2018 - 13:56:52 +0100)
\end{verbatim}
}
\end{block}
 \begin{itemize}
  \item \cod{MLO} Wegen TI
  \item \cod{u-boot.img}
 \end{itemize}
\begin{textblock}{100}(45,30)
 \includegraphics[width=0.75\textwidth]{components.pdf}
\end{textblock} 
\end{frame}

\begin{frame}[fragile]{Kernel}{Zwei Files}
\begin{block}{A}
{
\tiny
\begin{verbatim}
Booting Linux on physical CPU 0x0					       
Linux version 4.19.5 (buchmann@buchmannh) (gcc version 8.2.0 (GCC)) #6 SMP PRE8
\end{verbatim}
}
\end{block}
\begin{itemize}
 \item \cod{zImage} Der {\em kernel}
 \item \cod{am335x-boneblack-wireless.dtb} device tree
 \end{itemize}
\begin{textblock}{100}(45,30)
 \includegraphics[width=0.75\textwidth]{components.pdf}
\end{textblock} 
\end{frame}

\begin{frame}[fragile]{RootFS: Viele Files}{Unser Interesse}
\begin{block}{B}
{
\tiny
\begin{verbatim}
VFS: Mounted root (ext4 filesystem) on device 179:2.
devtmpfs: mounted
Freeing unused kernel memory: 1024K

Please press Enter to activate this console. 
\end{verbatim}
}
\end{block}
\begin{itemize}
 \item \cod{linuxrc} Init-Process
 \item ...
\end{itemize}
\begin{textblock}{100}(45,25)
 \includegraphics[width=0.75\textwidth]{components.pdf}
\end{textblock} 

\end{frame}

\begin{frame}{RootFS}{Flavours}
 \begin{itemize}
  \item nano
  \begin{itemize}
   \item Assembler ohne {\em libraries} \cod{s-nano.S}
   \item \c fast ohne {\em libraries} \cod{c-nano.c}
  \end{itemize}
  \item mini
  \begin{itemize}
   \item {\em libraries}
   \begin{itemize}
    \item static
    \item dynamic
   \end{itemize}
  \end{itemize}
  \item full
  \begin{itemize}
   \item \cod{busybox}
   \item \cod{ssh}
   \item ...
  \end{itemize}
 \end{itemize}
\end{frame}

\input{nano.tex}
\input{mini.tex}
\input{exercises.tex}
\end{document}
